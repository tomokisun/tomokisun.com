# tomokisun.com - 90年代スタイルのウェブサイト

このプロジェクトはtomokisun.comの90年代スタイルのウェブサイトで、1990年代のウェブデザイン要素を特徴としています。HonoX、Vite、Bunを使用して構築され、Cloudflare Workersにデプロイされています。

## 技術スタック

- **Bun**: JavaScriptランタイムおよびパッケージマネージャー
- **Vite**: ビルドツールおよび開発サーバー
- **Hono/HonoX**: Webフレームワーク（JSXレンダリングを使用）
- **Tailwind CSS**: ユーティリティファーストのCSSフレームワーク
- **Cloudflare Workers**: デプロイメントプラットフォーム
- **Cloudflare KV**: 訪問者カウンターなどのデータ保存に使用
- **Cloudflare D1**: SQLiteベースのデータベース（ゲストブック機能に使用）
- **Drizzle ORM**: データベース操作のためのORM

## 特徴

- テーブルベースのレイアウト（90年代の標準）
- 明るく対照的な色使い
- Comic Sansなどの当時人気だったフォント
- アニメーション要素（点滅するテキスト、マーキー）
- 訪問者カウンター（Cloudflare KVを使用）
- 「常に工事中」の通知
- ゲストブック機能（Cloudflare D1とDrizzle ORMを使用）
- カスタムマウスカーソルとトレイルエフェクト
- レスポンシブデザイン（モバイル対応）
- 虹色の区切り線
- キリ番通知機能
- 右クリック禁止機能（通知付き）

## プロジェクトの実行

ローカルでプロジェクトを実行するには：

```bash
# 依存関係のインストール
bun install

# 開発サーバーの起動
bun run dev
```

その後、ブラウザでhttp://localhost:5173/を開きます

### データベースのセットアップ

ローカル開発環境でデータベースを使用するには：

```bash
# ローカルデータベースのマイグレーション実行
bun run migration:local

# Drizzle Studioの起動（データベース管理UI）
bun run studio
```

## プロジェクト構造

```
tomokisun.com/
├── app/                   # アプリケーションのソースコード
│   ├── client.ts          # クライアントサイドのエントリーポイント
│   ├── server.ts          # サーバーサイドのエントリーポイント
│   ├── style.css          # グローバルスタイル（Tailwind CSSを含む）
│   ├── global.d.ts        # グローバル型定義
│   ├── components/        # 再利用可能なコンポーネント（Atomic Design）
│   │   ├── atoms/         # 基本的なUIコンポーネント
│   │   ├── molecules/     # 複合的なUIコンポーネント
│   │   ├── organisms/     # 複雑なUIコンポーネント
│   │   ├── pages/         # ページコンポーネント
│   │   └── templates/     # テンプレートコンポーネント
│   ├── database/          # データベース関連
│   │   └── schema.ts      # Drizzle ORMスキーマ定義
│   ├── routes/            # ページルート
│   │   ├── _404.tsx       # 404エラーページ
│   │   ├── _error.tsx     # エラーページ
│   │   ├── _renderer.tsx  # JSXレンダラー設定
│   │   ├── accounts.tsx   # アカウント一覧ページ
│   │   ├── index.tsx      # ホームページ
│   │   └── products.tsx   # プロダクト一覧ページ
│   ├── types/             # 型定義
│   │   └── guest-books.ts # ゲストブック関連の型定義
│   └── utils/             # ユーティリティ関数
│       ├── format-date.ts # 日付フォーマット関数
│       └── visitors.ts    # 訪問者カウンター機能
├── docs/                  # プロジェクトドキュメント
│   └── tone-and-manner.md # デザインガイドライン
├── drizzle/               # データベースマイグレーションファイル
│   ├── 0000_happy_tag.sql # 初期マイグレーションSQL
│   └── meta/              # マイグレーションメタデータ
├── public/                # 静的アセット
│   ├── .assetsignore      # アセット除外設定
│   └── favicon.ico        # ファビコン
├── drizzle.config.ts      # Drizzle設定（本番環境用）
├── drizzle.config.local.ts # Drizzle設定（ローカル環境用）
├── vite.config.ts         # Vite設定
└── wrangler.jsonc         # Cloudflare Workers設定
```

## 開発ワークフロー

### 依存関係の管理

```bash
# パッケージのインストール
bun install

# 新しいパッケージの追加
bun add [パッケージ名]

# 開発用パッケージの追加
bun add -D [パッケージ名]
```

### 開発サーバーの起動

```bash
# 開発サーバーの起動
bun run dev
```

### データベース操作

```bash
# マイグレーションの生成
bun run migration:generate

# マイグレーションの実行
bun run migration

# ローカルデータベースへのマイグレーション適用
bun run migration:local

# Drizzle Studioの起動（データベース管理UI）
bun run studio
```

### ビルドとプレビュー

```bash
# プロジェクトのビルド
bun run build

# ビルド後のプレビュー（Wranglerを使用）
bun run preview
```

### デプロイ

```bash
# Cloudflare Workersへのデプロイ
bun run deploy
```

## 主要機能

### 訪問者カウンター

サイトには訪問者カウンター機能が実装されています。この機能は以下の仕様に基づいています：

- **データストレージ**: Cloudflare KVを使用して訪問者数を保存
- **カウント方法**: ホームページにアクセスするたびにカウンターが1増加
- **表示形式**: 8桁のゼロ埋め数字（例: 00000123）
- **キリ番通知**: 特定の数値（キリ番）に達した際に通知メッセージを表示
- **実装場所**: 
  - カウント処理: `app/utils/visitors.ts`
  - 表示: `app/components/organisms/Menu.tsx`のサイドバー内

### ゲストブック

サイトには90年代風のゲストブック機能があり、訪問者がメッセージを残すことができます。この機能の仕様は以下の通りです：

- **データストレージ**: Cloudflare D1（SQLite）データベースを使用
- **ORM**: Drizzle ORMを使用してデータベース操作を実装
- **データモデル**: 
  - ユーザー名（3〜20文字）
  - メッセージ本文（1〜500文字）
  - 投稿日時（自動記録）
- **バリデーション**: Zodを使用したフォーム入力のバリデーション
- **表示形式**: 投稿者名、日付、メッセージ内容を表示
- **日付フォーマット**: 日本語形式（YYYY-MM-DD）
- **実装場所**:
  - スキーマ定義: `app/database/schema.ts`
  - 型定義とバリデーション: `app/types/guest-books.ts`
  - 投稿処理: `app/routes/index.tsx`のPOSTハンドラー
  - 表示コンポーネント: `app/components/organisms/Guestbook.tsx`

### マウストレイルエフェクト

サイトには90年代風のマウストレイルエフェクトが実装されています。この機能の仕様は以下の通りです：

- **実装方法**: CSSアニメーションとJavaScriptイベントリスナーの組み合わせ
- **エフェクト内容**: 
  - マウスの動きに合わせて小さな光の粒子が表示される
  - 粒子は時間経過とともにフェードアウト
  - クリック時には複数の粒子が放射状に表示される
- **カスタムカーソル**: 
  - サイト全体でカスタムカーソル画像を使用
  - インタラクティブ要素（リンク、ボタンなど）ではポインターカーソルに変更
- **スタイル**:
  - 黄色の粒子（#FFFF00）
  - ピンク色の光彩効果（#FF00FF）
  - フェードアウトアニメーション（1秒）
- **実装場所**: `app/style.css`内のCSSルールとJavaScriptコード

### レスポンシブデザイン

90年代のウェブサイトはレスポンシブではありませんでしたが、このプロジェクトではモバイルデバイスでの表示も考慮しています。レスポンシブデザインの仕様は以下の通りです：

- **実装方法**: CSSメディアクエリを使用
- **ブレイクポイント**:
  - タブレット: 768px以下
  - モバイル: 480px以下
- **モバイル対応の主な変更点**:
  - テーブルレイアウトをブロックレイアウトに変換
  - フォーム要素のサイズ調整（タッチ操作に最適化）
  - フォントサイズの調整
  - 余白の最適化
  - iOSでのフォーム入力最適化（ズーム防止、角丸の除去）
- **実装場所**: `app/style.css`内のメディアクエリ

### 右クリック禁止機能

90年代のウェブサイトでは、コンテンツの保護やユーザー体験の一部として右クリックを無効化することが一般的でした。このサイトでも右クリック禁止機能を実装しています。この機能の仕様は以下の通りです：

- **実装方法**: JavaScriptのcontextmenuイベントリスナーを使用
- **動作**:
  1. ユーザーが右クリックすると、デフォルトのコンテキストメニューが表示されなくなる
  2. 代わりに「右クリックは無効になっています」という通知が画面上部に表示される
  3. 通知は3秒後に自動的に消える
- **通知スタイル**:
  - 半透明の黒背景
  - 白色テキスト
  - 角丸の枠
  - ドロップシャドウ効果
- **実装場所**: `app/client.ts`

この機能は90年代のウェブサイトの雰囲気を再現するとともに、当時のウェブコンテンツ保護の考え方を反映しています。

## 90年代ウェブデザイン要素

このウェブサイトには、90年代ウェブデザインの多くの古典的な要素が組み込まれています：

1. **テーブルベースのレイアウト**：CSSが標準になる前は、テーブルがページレイアウトに使用されていました
2. **明るい色**：鮮やかで、しばしば対照的な配色が一般的でした
3. **点滅するテキスト**：重要な情報を強調するための点滅効果
4. **訪問者カウンター**：サイトの訪問者数を表示
5. **工事中**：「常に工事中」の通知
6. **ゲストブック**：訪問者がメッセージを残すことができる機能
7. **マーキーテキスト**：スクロールするテキスト効果
8. **テクスチャ背景**：タイル状の背景パターン
9. **3Dボタン**：3D効果を作り出すためのベベル加工されたエッジ
10. **キリ番通知**：訪問者数が特定の数値に達した際の通知
11. **カスタムマウスカーソル**：独自のカーソルデザイン
12. **虹色の区切り線**：セクション間の区切りに使用される虹色の水平線

## コンポーネント構造

このプロジェクトはAtomicデザインパターンに基づいてコンポーネントを構造化しています：

- **Atoms**: 最も基本的なUIコンポーネント（Button、Heading、Input、Link、Text、TextAreaなど）
- **Molecules**: 複数のAtomsを組み合わせた複合コンポーネント（FormField、GuestbookEntry、MenuItemなど）
- **Organisms**: 複数のMoleculesを組み合わせた複雑なコンポーネント（Footer、GuestbookList、Header、Menuなど）
- **Templates**: ページのレイアウト構造を定義するコンポーネント（PageLayout）
- **Pages**: 実際のページコンテンツを表示するコンポーネント（HomePage、AccountsPage、ProductsPageなど）

このパターンにより、コンポーネントの再利用性が高まり、メンテナンスが容易になります。例えば、`Text`コンポーネントは様々な場所で再利用され、一貫したスタイルを提供します。

## トーンアンドマナー

プロジェクトには`docs/tone-and-manner.md`ファイルが含まれており、サイトのデザイン哲学、ビジュアル要素、コンテンツトーン、ユーザー体験に関する詳細なガイドラインが記載されています。このドキュメントは、サイトの一貫性を保ちながら開発を進めるための参考資料として使用できます。

### デザイン哲学

- **意図的なレトロ感**: 現代のウェブデザイン慣行に反して、初期のウェブの美学を称えるデザイン
- **「工事中」の永続性**: 「Always Under Construction」というフレーズで表現される、完成しない魅力
- **技術的な素朴さ**: 複雑なJavaScriptやCSSエフェクトを最小限に抑え、HTMLの基本に忠実

### ビジュアル要素

- **カラーパレット**: 深い青色の背景、明るい黄色のタイトル、ビビッドなピンク色のセクションヘッダー
- **タイポグラフィ**: Comic Sans MSなどの「クラシック」なウェブフォント
- **レイアウト**: 2カラム構造（左ナビゲーション + 右コンテンツ）、テーブルベースのレイアウト

### コンテンツトーン

- **カジュアルで個人的**: 堅苦しさを排除し、個人的な声で語りかける
- **技術的に正確だが親しみやすい**: 専門知識を示しつつも、親しみやすさを維持
- **自己言及的なユーモア**: 軽いユーモアを交えた文体

## 環境変数

プロジェクトでは以下の環境変数を使用しています：

- `CLOUDFLARE_ACCOUNT_ID`: CloudflareアカウントのアカウントID
- `CLOUDFLARE_DATABASE_ID`: Cloudflare D1データベースのID
- `CLOUDFLARE_API_TOKEN`: CloudflareのAPIトークン

これらの環境変数は`.env`ファイルに設定するか、Cloudflare Workersのシークレットとして設定する必要があります。

## デプロイ

このプロジェクトはCloudflare Workersにデプロイされています。デプロイには以下の手順を実行します：

1. プロジェクトをビルド: `bun run build`
2. Cloudflare Workersにデプロイ: `bun run deploy`

Cloudflare Workersの設定は`wrangler.jsonc`ファイルで管理されています。このファイルには、KVネームスペースやD1データベースなどのバインディングが含まれています。

## ライセンス

© 2025 tomokisun
